@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.
<form action="/api/books/1/uploadCoverImage" method="post" enctype="multipart/form-data">
    <input type="file" name="coverImage" />
    <button type="submit">Upload Image</button>
</form>

<img id="bookCover" alt="Book Cover" />

<script>
    fetch('/api/books/1/coverImage')
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            if (data && data.imageSrc) {
                document.getElementById('bookCover').src = data.imageSrc;
            } else {
                console.error('No image data found');
            }
        })
        .catch(error => {
            console.error('Error fetching image:', error);
        });

</script>
